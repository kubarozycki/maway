{"ast":null,"code":"import _objectSpread from\"/Users/rozyckj/repos/mawayRental/MawayFrontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";var _this=this;import{RESERVATION_STEPS,NEXT_STEP,PREVIOUS_STEP,SET_STEP_VALID,SET_STEP_INVALID,CHANGE_STEP}from'./actions';var initialState={currentStep:RESERVATION_STEPS[0],reservationSteps:RESERVATION_STEPS,focusedInput:null,currentStepValid:function currentStepValid(){return _this.reservationSteps.find(function(x){return x.value===_this.currentStep.index;}).valid;},goingForward:true// this indicates if we need to reload reservation step date or not\n};function canGoToStep(targetStep,state){for(var i=0;i<targetStep.value;i++){if(!state.reservationSteps[i].valid)return false;}return true;}export default function reservationApp(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case CHANGE_STEP:{var targetStep=RESERVATION_STEPS.find(function(x){return x.value===action.index;});return _objectSpread({},state,{},{currentStep:canGoToStep(targetStep,state)?targetStep:state.currentStep,goingForward:targetStep>state.currentStep});}case NEXT_STEP:{var _targetStep=RESERVATION_STEPS.find(function(x){return x.value===state.currentStep.value+1;});return _objectSpread({},state,{},{currentStep:canGoToStep(_targetStep,state)?_targetStep:state.currentStep,goingForward:true});}case SET_STEP_VALID:{var currenReservationSteps=state.reservationSteps;currenReservationSteps[state.currentStep.value].valid=true;return _objectSpread({},state,{},{reservationSteps:currenReservationSteps});}case SET_STEP_INVALID:{var _currenReservationSteps=state.reservationSteps;_currenReservationSteps[state.currentStep.value].valid=false;return _objectSpread({},state,{},{reservationSteps:_currenReservationSteps});}default:return state;}}","map":{"version":3,"sources":["/Users/rozyckj/repos/mawayRental/MawayFrontend/src/modules/reservation-main/reducers.js"],"names":["RESERVATION_STEPS","NEXT_STEP","PREVIOUS_STEP","SET_STEP_VALID","SET_STEP_INVALID","CHANGE_STEP","initialState","currentStep","reservationSteps","focusedInput","currentStepValid","find","x","value","index","valid","goingForward","canGoToStep","targetStep","state","i","reservationApp","action","type","currenReservationSteps"],"mappings":"+IAAA,OAASA,iBAAT,CAA4BC,SAA5B,CAAuCC,aAAvC,CAAsDC,cAAtD,CAAsEC,gBAAtE,CAAwFC,WAAxF,KAA2G,WAA3G,CAEA,GAAMC,CAAAA,YAAY,CAClB,CACIC,WAAW,CAAEP,iBAAiB,CAAC,CAAD,CADlC,CAEIQ,gBAAgB,CAAER,iBAFtB,CAGIS,YAAY,CAAE,IAHlB,CAIIC,gBAAgB,CAAE,kCAAM,CAAA,KAAI,CAACF,gBAAL,CAAsBG,IAAtB,CAA2B,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,KAAF,GAAY,KAAI,CAACN,WAAL,CAAiBO,KAAjC,EAA5B,EAAoEC,KAA1E,EAJtB,CAKIC,YAAY,CAAE,IAAK;AALvB,CADA,CASA,QAASC,CAAAA,WAAT,CAAqBC,UAArB,CAAiCC,KAAjC,CAAwC,CACpC,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,UAAU,CAACL,KAA/B,CAAsCO,CAAC,EAAvC,CAA2C,CACvC,GAAI,CAACD,KAAK,CAACX,gBAAN,CAAuBY,CAAvB,EAA0BL,KAA/B,CACI,MAAO,MAAP,CACP,CACD,MAAO,KAAP,CACH,CAED,cAAe,SAASM,CAAAA,cAAT,EAAsD,IAA9BF,CAAAA,KAA8B,2DAAtBb,YAAsB,IAARgB,CAAAA,MAAQ,2CACjE,OAAQA,MAAM,CAACC,IAAf,EACI,IAAKlB,CAAAA,WAAL,CACI,CACI,GAAMa,CAAAA,UAAU,CAAGlB,iBAAiB,CAACW,IAAlB,CAAuB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,KAAF,GAAYS,MAAM,CAACR,KAAvB,EAAxB,CAAnB,CACA,wBACOK,KADP,IACiB,CACTZ,WAAW,CAAEU,WAAW,CAACC,UAAD,CAAaC,KAAb,CAAX,CAAiCD,UAAjC,CAA8CC,KAAK,CAACZ,WADxD,CAETS,YAAY,CAAEE,UAAU,CAAGC,KAAK,CAACZ,WAFxB,CADjB,EAMH,CACL,IAAKN,CAAAA,SAAL,CACI,CACI,GAAMiB,CAAAA,WAAU,CAAGlB,iBAAiB,CAACW,IAAlB,CAAuB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,KAAF,GAAYM,KAAK,CAACZ,WAAN,CAAkBM,KAAlB,CAA0B,CAA1C,EAAxB,CAAnB,CACA,wBACOM,KADP,IACiB,CACTZ,WAAW,CAAEU,WAAW,CAACC,WAAD,CAAaC,KAAb,CAAX,CAAiCD,WAAjC,CAA8CC,KAAK,CAACZ,WADxD,CAETS,YAAY,CAAE,IAFL,CADjB,EAMH,CACL,IAAKb,CAAAA,cAAL,CAAqB,CACjB,GAAMqB,CAAAA,sBAAsB,CAAGL,KAAK,CAACX,gBAArC,CACAgB,sBAAsB,CAACL,KAAK,CAACZ,WAAN,CAAkBM,KAAnB,CAAtB,CAAgDE,KAAhD,CAAwD,IAAxD,CACA,wBACOI,KADP,IACiB,CACTX,gBAAgB,CAAEgB,sBADT,CADjB,EAKH,CACD,IAAKpB,CAAAA,gBAAL,CAAuB,CACnB,GAAMoB,CAAAA,uBAAsB,CAAGL,KAAK,CAACX,gBAArC,CACAgB,uBAAsB,CAACL,KAAK,CAACZ,WAAN,CAAkBM,KAAnB,CAAtB,CAAgDE,KAAhD,CAAwD,KAAxD,CACA,wBACOI,KADP,IACiB,CACTX,gBAAgB,CAAEgB,uBADT,CADjB,EAKH,CACD,QACI,MAAOL,CAAAA,KAAP,CAxCR,CA0CH","sourcesContent":["import { RESERVATION_STEPS, NEXT_STEP, PREVIOUS_STEP, SET_STEP_VALID, SET_STEP_INVALID, CHANGE_STEP } from './actions';\n\nconst initialState =\n{\n    currentStep: RESERVATION_STEPS[0],\n    reservationSteps: RESERVATION_STEPS,\n    focusedInput: null,\n    currentStepValid: () => this.reservationSteps.find(x => x.value === this.currentStep.index).valid,\n    goingForward: true // this indicates if we need to reload reservation step date or not\n}\n\nfunction canGoToStep(targetStep, state) {\n    for (var i = 0; i < targetStep.value; i++) {\n        if (!state.reservationSteps[i].valid)\n            return false;\n    }\n    return true;\n}\n\nexport default function reservationApp(state = initialState, action) {\n    switch (action.type) {\n        case CHANGE_STEP:\n            {\n                const targetStep = RESERVATION_STEPS.find(x => x.value === action.index);\n                return {\n                    ...state, ...{\n                        currentStep: canGoToStep(targetStep, state) ? targetStep : state.currentStep,\n                        goingForward: targetStep > state.currentStep\n                    }\n                }\n            }\n        case NEXT_STEP:\n            {\n                const targetStep = RESERVATION_STEPS.find(x => x.value === state.currentStep.value + 1);\n                return {\n                    ...state, ...{\n                        currentStep: canGoToStep(targetStep, state) ? targetStep : state.currentStep,\n                        goingForward: true\n                    }\n                }\n            }\n        case SET_STEP_VALID: {\n            const currenReservationSteps = state.reservationSteps;\n            currenReservationSteps[state.currentStep.value].valid = true;\n            return {\n                ...state, ...{\n                    reservationSteps: currenReservationSteps\n                }\n            }\n        }\n        case SET_STEP_INVALID: {\n            const currenReservationSteps = state.reservationSteps;\n            currenReservationSteps[state.currentStep.value].valid = false;\n            return {\n                ...state, ...{\n                    reservationSteps: currenReservationSteps\n                }\n            }\n        }\n        default:\n            return state\n    }\n}"]},"metadata":{},"sourceType":"module"}